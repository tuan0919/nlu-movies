{"version":3,"sources":["PaginationDot.tsx"],"names":["React","PureComponent","Animated","Easing","TouchableOpacity","styles","PaginationDot","constructor","props","state","animColor","Value","animOpacity","animTransform","componentDidMount","active","_animate","componentDidUpdate","prevProps","toValue","animatedDuration","animatedFriction","animatedTension","commonProperties","isInteraction","useNativeDriver","_shouldAnimateColor","animations","timing","easing","linear","duration","spring","friction","tension","push","parallel","start","color","inactiveColor","render","activeOpacity","carouselRef","containerStyle","inactiveStyle","inactiveOpacity","inactiveScale","index","style","tappable","delayPressInDot","animatedStyle","opacity","interpolate","inputRange","outputRange","transform","scale","animatedColor","backgroundColor","dotContainerStyle","sliderPaginationDotContainer","dotStyle","sliderPaginationDot","onPress","currentRef","current","_snapToItem","_getPositionIndex","error","console","warn","undefined"],"mappings":"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","sourcesContent":["import React, { PureComponent, RefObject } from 'react';\r\nimport {\r\n    Animated,\r\n    Easing,\r\n    TouchableOpacity,\r\n    StyleProp,\r\n    ViewStyle\r\n} from 'react-native';\r\nimport styles from './Pagination.style';\r\nimport type Carousel from 'src/carousel/Carousel';\r\n\r\ntype PaginationDotProps<TData> = {\r\n  inactiveOpacity: number;\r\n  inactiveScale: number;\r\n  active?: boolean;\r\n  activeOpacity?: number;\r\n  animatedDuration?: number;\r\n  animatedFriction?: number;\r\n  animatedTension?: number;\r\n  carouselRef?: Carousel<TData> | RefObject<Carousel<TData>> | null;\r\n  color?: string;\r\n  containerStyle?: StyleProp<ViewStyle>;\r\n  delayPressInDot?: number;\r\n  inactiveColor?: string;\r\n  inactiveStyle?: StyleProp<ViewStyle>;\r\n  index?: number;\r\n  style?: StyleProp<ViewStyle>;\r\n  tappable?: boolean;\r\n};\r\n\r\ntype PaginationDotState = {\r\n  animColor: Animated.Value;\r\n  animOpacity: Animated.Value;\r\n  animTransform: Animated.Value;\r\n};\r\n\r\nexport default class PaginationDot<TData> extends PureComponent<\r\n  PaginationDotProps<TData>,\r\n  PaginationDotState\r\n> {\r\n    constructor (props: PaginationDotProps<TData>) {\r\n        super(props);\r\n        this.state = {\r\n            animColor: new Animated.Value(0),\r\n            animOpacity: new Animated.Value(0),\r\n            animTransform: new Animated.Value(0)\r\n        };\r\n    }\r\n\r\n    componentDidMount () {\r\n        if (this.props.active) {\r\n            this._animate(1);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate (prevProps: PaginationDotProps<TData>) {\r\n        if (prevProps.active !== this.props.active) {\r\n            this._animate(this.props.active ? 1 : 0);\r\n        }\r\n    }\r\n\r\n    _animate (toValue = 0) {\r\n        const { animColor, animOpacity, animTransform } = this.state;\r\n        const { animatedDuration, animatedFriction, animatedTension } = this.props;\r\n\r\n        const commonProperties = {\r\n            toValue,\r\n            isInteraction: false,\r\n            useNativeDriver: !this._shouldAnimateColor\r\n        };\r\n\r\n        const animations = [\r\n            Animated.timing(animOpacity, {\r\n                easing: Easing.linear,\r\n                duration: animatedDuration,\r\n                ...commonProperties\r\n            }),\r\n            Animated.spring(animTransform, {\r\n                friction: animatedFriction,\r\n                tension: animatedTension,\r\n                ...commonProperties\r\n            })\r\n        ];\r\n\r\n        if (this._shouldAnimateColor) {\r\n            animations.push(\r\n                Animated.timing(animColor, {\r\n                    easing: Easing.linear,\r\n                    ...commonProperties\r\n                })\r\n            );\r\n        }\r\n\r\n        Animated.parallel(animations).start();\r\n    }\r\n\r\n    get _shouldAnimateColor () {\r\n        const { color, inactiveColor } = this.props;\r\n        return color && inactiveColor;\r\n    }\r\n\r\n    render () {\r\n        const { animColor, animOpacity, animTransform } = this.state;\r\n        const {\r\n            active,\r\n            activeOpacity,\r\n            carouselRef,\r\n            color,\r\n            containerStyle,\r\n            inactiveColor,\r\n            inactiveStyle,\r\n            inactiveOpacity,\r\n            inactiveScale,\r\n            index,\r\n            style,\r\n            tappable,\r\n            delayPressInDot\r\n        } = this.props;\r\n\r\n        const animatedStyle = {\r\n            opacity: animOpacity.interpolate({\r\n                inputRange: [0, 1],\r\n                outputRange: [inactiveOpacity, 1]\r\n            }),\r\n            transform: [\r\n                {\r\n                    scale: animTransform.interpolate({\r\n                        inputRange: [0, 1],\r\n                        outputRange: [inactiveScale, 1]\r\n                    })\r\n                }\r\n            ]\r\n        };\r\n        const animatedColor =\r\n      this._shouldAnimateColor && inactiveColor && color ?\r\n          {\r\n              backgroundColor: animColor.interpolate({\r\n                  inputRange: [0, 1],\r\n                  outputRange: [inactiveColor, color]\r\n              })\r\n          } :\r\n          {};\r\n\r\n        const dotContainerStyle = [\r\n            styles.sliderPaginationDotContainer,\r\n            containerStyle || {}\r\n        ];\r\n\r\n        const dotStyle = [\r\n            styles.sliderPaginationDot,\r\n            style || {},\r\n            (!active && inactiveStyle) || {},\r\n            animatedStyle,\r\n            animatedColor\r\n        ];\r\n\r\n        const onPress =\r\n      tappable && (!!index || index === 0) ?\r\n          () => {\r\n              try {\r\n                  const currentRef =\r\n                carouselRef && 'current' in carouselRef ?\r\n                    carouselRef.current :\r\n                    carouselRef;\r\n              // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\r\n              currentRef!._snapToItem(currentRef!._getPositionIndex(index));\r\n              } catch (error) {\r\n                  console.warn(\r\n                      'react-native-snap-carousel | Pagination: ' +\r\n                  '`carouselRef` has to be a Carousel ref.\\n' +\r\n                  error\r\n                  );\r\n              }\r\n          } :\r\n          undefined;\r\n\r\n        return (\r\n            <TouchableOpacity\r\n              accessible={false}\r\n              style={dotContainerStyle}\r\n              activeOpacity={tappable ? activeOpacity : 1}\r\n              onPress={onPress}\r\n              delayPressIn={delayPressInDot}\r\n            >\r\n                <Animated.View style={dotStyle} />\r\n            </TouchableOpacity>\r\n        );\r\n    }\r\n}\r\n"]}