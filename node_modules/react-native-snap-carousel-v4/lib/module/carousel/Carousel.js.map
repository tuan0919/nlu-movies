{"version":3,"sources":["Carousel.tsx"],"names":["React","Animated","I18nManager","Platform","View","shallowCompare","defaultScrollInterpolator","stackScrollInterpolator","tinderScrollInterpolator","defaultAnimatedStyles","shiftAnimatedStyles","stackAnimatedStyles","tinderAnimatedStyles","IS_ANDROID","OS","IS_RTL","isRTL","Carousel","Component","constructor","props","state","hideCarousel","apparitionDelay","interpolators","initialActiveItem","_getFirstItem","firstItem","_activeItem","_onScrollActiveItem","_previousFirstItem","_previousItemsLength","_mounted","_positions","_currentScrollOffset","_scrollEnabled","scrollEnabled","_getCellRendererComponent","bind","_getItemLayout","_getKeyExtractor","_onLayout","_onScroll","_onMomentumScrollEnd","_onTouchStart","_onTouchEnd","_renderItem","_setScrollHandler","_displayWarnings","componentDidMount","autoplay","_initPositionsAndInterpolators","_initTimeout","setTimeout","apparitionCallback","setState","startAutoplay","_needsScrollView","_firstItem","_snapToItem","_apparitionTimeout","shouldComponentUpdate","nextProps","nextState","shouldOptimizeUpdates","componentDidUpdate","prevProps","itemsLength","_getCustomDataLength","nextFirstItem","nextActiveItem","hasNewSize","vertical","itemHeight","sliderHeight","itemWidth","sliderWidth","_setScrollEnabled","length","_hackActiveSlideAnimation","onScroll","componentWillUnmount","stopAutoplay","clearTimeout","_hackSlideAnimationTimeout","_enableAutoplayTimeout","_autoplayTimeout","_snapNoMomentumTimeout","_androidRepositioningTimeout","realIndex","currentIndex","_getDataIndex","currentScrollPosition","scrollEventConfig","listener","useNativeDriver","_scrollPos","Value","argMapping","nativeEvent","contentOffset","y","x","Array","isArray","_argMapping","pop","argMap","push","_onScrollHandler","event","pluginName","removedProps","console","error","forEach","removedProp","warn","useScrollView","FlatList","_shouldUseStackLayout","_shouldUseTinderLayout","_needsRTLAdaptations","_enableLoop","data","enableSnap","loop","_shouldAnimateSlides","inactiveSlideOpacity","inactiveSlideScale","scrollInterpolator","slideInterpolatedStyle","_shouldUseShiftLayout","inactiveSlideShift","layout","_shouldRepositionScroll","index","loopClonesPerSide","dataLength","_roundNumber","num","decimals","rounder","Math","pow","round","Number","EPSILON","_isMultiple","_getCustomData","previousItems","nextItems","dataMultiplier","floor","remainder","i","unshift","slice","concat","_getCustomIndex","baseDataIndexes","dataIndexes","j","_getPositionIndex","_getSnapOffsets","offset","_getItemMainDimension","map","_","_getWrappedRef","_carouselRef","scrollTo","scrollToOffset","getNode","_getScrollEnabled","wrappedRef","setNativeProps","_getItemScrollOffset","start","itemMainDimension","children","style","cellStyle","zIndex","_getScrollOffset","_getContainerInnerMargin","opposite","activeSlideAlignment","_getActiveSlideOffset","activeSlideOffset","minOffset","_getActiveItem","center","lastIndex","itemIndex","end","_getSlideInterpolatedStyle","animatedValue","layoutCardOffset","_itemData","_index","interpolator","inputRange","outputRange","interpolate","extrapolate","scrollValue","multiplier","scrollDelta","_scrollTo","animated","_repositionScroll","repositionTo","options","onTouchStart","_autoplaying","pauseAutoPlay","onTouchEnd","_autoplay","onScrollIndexChanged","scrollOffset","autoplayDelay","onMomentumScrollEnd","onSnapToItem","hasSnapped","onLayout","_onLayoutInitDone","fireCallback","forceScrollTo","undefined","requiresManualTrigger","autoplayInterval","_autoplayInterval","setInterval","snapToNext","clearInterval","snapToItem","positionIndex","newIndex","snapToPrev","triggerRenderingHack","item","keyExtractor","slideStyle","animate","animatedStyle","dataIndex","mainDimension","height","width","specificProps","key","renderItem","scrollPosition","carouselRef","_getComponentOverridableProps","visibleItems","ceil","initialNumPerSide","initialNumToRender","maxToRenderPerBatch","windowSize","automaticallyAdjustContentInsets","decelerationRate","directionalLockEnabled","disableScrollViewPanResponder","inverted","overScrollMode","pinchGestureEnabled","pointerEvents","scrollsToTop","showsHorizontalScrollIndicator","showsVerticalScrollIndicator","_getComponentStaticProps","CellRendererComponent","containerCustomStyle","contentContainerCustomStyle","getItemLayout","useExperimentalSnap","containerStyle","opacity","flexDirection","innerMarginStyle","paddingTop","paddingBottom","paddingLeft","paddingRight","contentContainerStyle","snapProps","snapToAlignment","snapToInterval","snapToOffsets","initialScrollIndex","numColumns","ref","c","horizontal","scrollEventThrottle","render","ScrollViewComponent","ScrollView","callbackOffsetMargin","hasParallaxImages"],"mappings":"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","sourcesContent":["import React, { PropsWithChildren } from 'react';\r\nimport {\r\n    Animated,\r\n    FlatList,\r\n    I18nManager,\r\n    Platform,\r\n    ScrollView,\r\n    View,\r\n    StyleProp,\r\n    NativeSyntheticEvent,\r\n    NativeScrollEvent,\r\n    LayoutChangeEvent,\r\n    GestureResponderEvent,\r\n    ViewStyle\r\n} from 'react-native';\r\nimport shallowCompare from 'react-addons-shallow-compare';\r\nimport {\r\n    defaultScrollInterpolator,\r\n    stackScrollInterpolator,\r\n    tinderScrollInterpolator,\r\n    defaultAnimatedStyles,\r\n    shiftAnimatedStyles,\r\n    stackAnimatedStyles,\r\n    tinderAnimatedStyles\r\n} from '../utils/animations';\r\nimport type { CarouselProps, CarouselState } from './types';\r\n\r\n// Metro doesn't support dynamic imports - i.e. require() done in the component itself\r\n// But at the same time the following import will fail on Snack...\r\n// TODO: find a way to get React Native's version without having to assume the file path\r\n// import RN_PACKAGE from '../../../react-native/package.json';\r\n\r\nconst IS_ANDROID = Platform.OS === 'android';\r\n\r\n// React Native automatically handles RTL layouts; unfortunately, it's buggy with horizontal ScrollView\r\n// See https://github.com/facebook/react-native/issues/11960\r\n// NOTE: the following variable is not declared in the constructor\r\n// otherwise it is undefined at init, which messes with custom indexes\r\nconst IS_RTL = I18nManager.isRTL;\r\n\r\nexport class Carousel<TData> extends React.Component<\r\n  CarouselProps<TData>,\r\n  CarouselState\r\n> {\r\n  static defaultProps = {\r\n      activeSlideAlignment: 'center',\r\n      activeSlideOffset: 20,\r\n      apparitionDelay: 0,\r\n      autoplay: false,\r\n      autoplayDelay: 1000,\r\n      autoplayInterval: 3000,\r\n      callbackOffsetMargin: 5,\r\n      containerCustomStyle: {},\r\n      contentContainerCustomStyle: {},\r\n      enableSnap: true,\r\n      firstItem: 0,\r\n      hasParallaxImages: false,\r\n      inactiveSlideOpacity: 0.7,\r\n      inactiveSlideScale: 0.9,\r\n      inactiveSlideShift: 0,\r\n      layout: 'default',\r\n      loop: false,\r\n      loopClonesPerSide: 3,\r\n      scrollEnabled: true,\r\n      slideStyle: {},\r\n      shouldOptimizeUpdates: true,\r\n      useExperimentalSnap: false,\r\n      useScrollView: !Animated.FlatList\r\n  };\r\n\r\n  _activeItem: number;\r\n  _onScrollActiveItem: number;\r\n  _previousFirstItem: number;\r\n  _previousItemsLength: number;\r\n  _mounted: boolean;\r\n  _positions: { start: number; end: number }[];\r\n  _currentScrollOffset: number;\r\n  _scrollEnabled: boolean;\r\n\r\n  _initTimeout?: ReturnType<typeof setTimeout>;\r\n  _apparitionTimeout?: ReturnType<typeof setTimeout>;\r\n  _hackSlideAnimationTimeout?: ReturnType<typeof setTimeout>;\r\n  _enableAutoplayTimeout?: ReturnType<typeof setTimeout>;\r\n  _autoplayTimeout?: ReturnType<typeof setTimeout>;\r\n  _snapNoMomentumTimeout?: ReturnType<typeof setTimeout>;\r\n  _androidRepositioningTimeout?: ReturnType<typeof setTimeout>;\r\n  _autoplayInterval?: ReturnType<typeof setInterval>;\r\n\r\n  _scrollPos?: Animated.Value;\r\n\r\n  _onScrollHandler?: ReturnType<typeof Animated.event>;\r\n\r\n  _carouselRef: ScrollView | FlatList<TData> | null = null;\r\n\r\n  _autoplaying?: boolean;\r\n  _autoplay?: boolean;\r\n\r\n  _onLayoutInitDone?: boolean;\r\n\r\n  constructor (props: CarouselProps<TData>) {\r\n      super(props);\r\n\r\n      this.state = {\r\n          hideCarousel: !!props.apparitionDelay,\r\n          interpolators: []\r\n      };\r\n\r\n      // this._RNVersionCode = this._getRNVersionCode();\r\n\r\n      // The following values are not stored in the state because 'setState()' is asynchronous\r\n      // and this results in an absolutely crappy behavior on Android while swiping (see #156)\r\n      const initialActiveItem = this._getFirstItem(props.firstItem);\r\n      this._activeItem = initialActiveItem;\r\n      this._onScrollActiveItem = initialActiveItem;\r\n      this._previousFirstItem = initialActiveItem;\r\n      this._previousItemsLength = initialActiveItem;\r\n\r\n      this._mounted = false;\r\n      this._positions = [];\r\n      this._currentScrollOffset = 0; // Store ScrollView's scroll position\r\n      this._scrollEnabled = props.scrollEnabled !== false;\r\n\r\n      this._getCellRendererComponent = this._getCellRendererComponent.bind(this);\r\n      this._getItemLayout = this._getItemLayout.bind(this);\r\n      this._getKeyExtractor = this._getKeyExtractor.bind(this);\r\n      this._onLayout = this._onLayout.bind(this);\r\n      this._onScroll = this._onScroll.bind(this);\r\n      this._onMomentumScrollEnd = this._onMomentumScrollEnd.bind(this);\r\n      this._onTouchStart = this._onTouchStart.bind(this);\r\n      this._onTouchEnd = this._onTouchEnd.bind(this);\r\n      this._renderItem = this._renderItem.bind(this);\r\n\r\n      // WARNING: call this AFTER binding _onScroll\r\n      this._setScrollHandler(props);\r\n\r\n      // Display warnings\r\n      this._displayWarnings(props);\r\n  }\r\n\r\n  componentDidMount () {\r\n      const { apparitionDelay, autoplay, firstItem } = this.props;\r\n\r\n      this._mounted = true;\r\n      this._initPositionsAndInterpolators();\r\n\r\n      // Without 'requestAnimationFrame' or a `0` timeout, images will randomly not be rendered on Android...\r\n      this._initTimeout = setTimeout(() => {\r\n          if (!this._mounted) {\r\n              return;\r\n          }\r\n\r\n          const apparitionCallback = () => {\r\n              if (apparitionDelay) {\r\n                  this.setState({ hideCarousel: false });\r\n              }\r\n              if (autoplay) {\r\n                  this.startAutoplay();\r\n              }\r\n          };\r\n\r\n          // FlatList will use its own built-in prop `initialScrollIndex`\r\n          if (this._needsScrollView()) {\r\n              const _firstItem = this._getFirstItem(firstItem);\r\n              this._snapToItem(_firstItem, false, false, true);\r\n              // this._hackActiveSlideAnimation(_firstItem);\r\n          }\r\n\r\n          if (apparitionDelay) {\r\n              this._apparitionTimeout = setTimeout(() => {\r\n                  apparitionCallback();\r\n              }, apparitionDelay);\r\n          } else {\r\n              apparitionCallback();\r\n          }\r\n      }, 1);\r\n  }\r\n\r\n  shouldComponentUpdate (\r\n      nextProps: CarouselProps<TData>,\r\n      nextState: CarouselState\r\n  ): boolean {\r\n      if (this.props.shouldOptimizeUpdates === false) {\r\n          return true;\r\n      } else {\r\n          return shallowCompare(this, nextProps, nextState);\r\n      }\r\n  }\r\n\r\n  componentDidUpdate (prevProps: CarouselProps<TData>) {\r\n      const { interpolators } = this.state;\r\n      const {\r\n          firstItem,\r\n          scrollEnabled\r\n      } = this.props;\r\n      const itemsLength = this._getCustomDataLength(this.props);\r\n\r\n      if (!itemsLength) {\r\n          return;\r\n      }\r\n\r\n      const nextFirstItem = this._getFirstItem(firstItem, this.props);\r\n      let nextActiveItem =\r\n      typeof this._activeItem !== 'undefined' ?\r\n          this._activeItem :\r\n          nextFirstItem;\r\n\r\n      const hasNewSize = this.props.vertical !== prevProps.vertical ||\r\n       (\r\n           this.props.vertical && prevProps.vertical && (\r\n               prevProps.itemHeight !== this.props.itemHeight || prevProps.sliderHeight !== this.props.sliderHeight\r\n           )\r\n       ) || (\r\n          !this.props.vertical && !prevProps.vertical && (\r\n              prevProps.itemWidth !== this.props.itemWidth || prevProps.sliderWidth !== this.props.sliderWidth\r\n          )\r\n      );\r\n\r\n      // Prevent issues with dynamically removed items\r\n      if (nextActiveItem > itemsLength - 1) {\r\n          nextActiveItem = itemsLength - 1;\r\n      }\r\n\r\n      // Handle changing scrollEnabled independent of user -> carousel interaction\r\n      if (scrollEnabled !== prevProps.scrollEnabled) {\r\n          this._setScrollEnabled(scrollEnabled);\r\n      }\r\n\r\n      if (\r\n          interpolators.length !== itemsLength ||\r\n          hasNewSize\r\n      ) {\r\n          this._activeItem = nextActiveItem;\r\n          this._previousItemsLength = itemsLength;\r\n\r\n          this._initPositionsAndInterpolators(this.props);\r\n\r\n          // Handle scroll issue when dynamically removing items (see #133)\r\n          // This also fixes first item's active state on Android\r\n          // Because 'initialScrollIndex' apparently doesn't trigger scroll\r\n          if (this._previousItemsLength > itemsLength) {\r\n              this._hackActiveSlideAnimation(nextActiveItem);\r\n          }\r\n\r\n          if (hasNewSize) {\r\n              this._snapToItem(nextActiveItem, false, false, true);\r\n          }\r\n      } else if (\r\n          nextFirstItem !== this._previousFirstItem &&\r\n      nextFirstItem !== this._activeItem\r\n      ) {\r\n          this._activeItem = nextFirstItem;\r\n          this._previousFirstItem = nextFirstItem;\r\n          this._snapToItem(nextFirstItem, false, true, true);\r\n      }\r\n\r\n      if (this.props.onScroll !== prevProps.onScroll) {\r\n          this._setScrollHandler(this.props);\r\n      }\r\n  }\r\n\r\n  componentWillUnmount () {\r\n      this._mounted = false;\r\n      this.stopAutoplay();\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearTimeout(this._initTimeout);\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearTimeout(this._apparitionTimeout);\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearTimeout(this._hackSlideAnimationTimeout);\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearTimeout(this._enableAutoplayTimeout);\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearTimeout(this._autoplayTimeout);\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearTimeout(this._snapNoMomentumTimeout);\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearTimeout(this._androidRepositioningTimeout);\r\n  }\r\n\r\n  get realIndex () {\r\n      return this._activeItem;\r\n  }\r\n\r\n  get currentIndex () {\r\n      return this._getDataIndex(this._activeItem);\r\n  }\r\n\r\n  get currentScrollPosition () {\r\n      return this._currentScrollOffset;\r\n  }\r\n\r\n  _setScrollHandler (props: CarouselProps<TData>) {\r\n      // Native driver for scroll events\r\n      const scrollEventConfig = {\r\n          listener: this._onScroll,\r\n          useNativeDriver: true\r\n      };\r\n      this._scrollPos = new Animated.Value(0);\r\n      const argMapping = props.vertical ?\r\n          [{ nativeEvent: { contentOffset: { y: this._scrollPos } } }] :\r\n          [{ nativeEvent: { contentOffset: { x: this._scrollPos } } }];\r\n\r\n      // @ts-expect-error Let's ignore for now that trick\r\n      if (props.onScroll && Array.isArray(props.onScroll._argMapping)) {\r\n      // Because of a react-native issue https://github.com/facebook/react-native/issues/13294\r\n          argMapping.pop();\r\n          // @ts-expect-error Let's ignore for now that trick\r\n          const [argMap] = props.onScroll._argMapping;\r\n          if (argMap && argMap.nativeEvent && argMap.nativeEvent.contentOffset) {\r\n              // Shares the same animated value passed in props\r\n              this._scrollPos =\r\n          argMap.nativeEvent.contentOffset.x ||\r\n          argMap.nativeEvent.contentOffset.y ||\r\n          this._scrollPos;\r\n          }\r\n          // @ts-expect-error Let's ignore for now that trick\r\n          argMapping.push(...props.onScroll._argMapping);\r\n      }\r\n      this._onScrollHandler = Animated.event<NativeScrollEvent>(\r\n          argMapping,\r\n          scrollEventConfig\r\n      );\r\n  }\r\n\r\n  // This will return a future-proof version code number compatible with semantic versioning\r\n  // Examples: 0.59.3 -> 5903 / 0.61.4 -> 6104 / 0.62.12 -> 6212 / 1.0.2 -> 10002\r\n  // _getRNVersionCode () {\r\n  //     const version = RN_PACKAGE && RN_PACKAGE.version;\r\n  //     if (!version) {\r\n  //         return null;\r\n  //     }\r\n  //     const versionSplit = version.split('.');\r\n  //     if (!versionSplit || !versionSplit.length) {\r\n  //         return null;\r\n  //     }\r\n  //     return versionSplit[0] * 10000 +\r\n  //         (typeof versionSplit[1] !== 'undefined' ? versionSplit[1] * 100 : 0) +\r\n  //         (typeof versionSplit[2] !== 'undefined' ? versionSplit[2] * 1 : 0);\r\n  // }\r\n\r\n  _displayWarnings (props: CarouselProps<TData> = this.props) {\r\n      const pluginName = 'react-native-snap-carousel';\r\n      const removedProps = [\r\n          'activeAnimationType',\r\n          'activeAnimationOptions',\r\n          'enableMomentum',\r\n          'lockScrollTimeoutDuration',\r\n          'lockScrollWhileSnapping',\r\n          'onBeforeSnapToItem',\r\n          'swipeThreshold'\r\n      ] as const;\r\n\r\n      // if (this._RNVersionCode && this._RNVersionCode < 5800) {\r\n      //     console.error(\r\n      //         `${pluginName}: Version 4+ of the plugin is based on React Native props that were introduced in version 0.58. ` +\r\n      //         'Please downgrade to version 3.x or update your version of React Native.'\r\n      //     );\r\n      // }\r\n      if (!props.vertical && (!props.sliderWidth || !props.itemWidth)) {\r\n          console.error(\r\n              `${pluginName}: You need to specify both 'sliderWidth' and 'itemWidth' for horizontal carousels`\r\n          );\r\n      }\r\n      if (props.vertical && (!props.sliderHeight || !props.itemHeight)) {\r\n          console.error(\r\n              `${pluginName}: You need to specify both 'sliderHeight' and 'itemHeight' for vertical carousels`\r\n          );\r\n      }\r\n\r\n      removedProps.forEach((removedProp) => {\r\n          if (removedProp in props) {\r\n              console.warn(\r\n                  `${pluginName}: Prop ${removedProp} has been removed in version 4 of the plugin`\r\n              );\r\n          }\r\n      });\r\n  }\r\n\r\n  _needsScrollView () {\r\n      const { useScrollView } = this.props;\r\n      // Android's cell renderer is buggy and has a stange overflow\r\n      // TODO: a workaround might be to pass the custom animated styles directly to it\r\n      return IS_ANDROID ?\r\n          useScrollView ||\r\n          !Animated.FlatList ||\r\n          this._shouldUseStackLayout() ||\r\n          this._shouldUseTinderLayout() :\r\n          useScrollView || !Animated.FlatList;\r\n  }\r\n\r\n  _needsRTLAdaptations () {\r\n      const { vertical } = this.props;\r\n      return IS_RTL && IS_ANDROID && !vertical;\r\n  }\r\n\r\n  _enableLoop () {\r\n      const { data, enableSnap, loop } = this.props;\r\n      return enableSnap && loop && data && data.length && data.length > 1;\r\n  }\r\n\r\n  _shouldAnimateSlides (props: CarouselProps<TData> = this.props) {\r\n      const {\r\n          inactiveSlideOpacity,\r\n          inactiveSlideScale,\r\n          scrollInterpolator,\r\n          slideInterpolatedStyle\r\n      } = props;\r\n      return (\r\n          inactiveSlideOpacity < 1 ||\r\n      inactiveSlideScale < 1 ||\r\n      !!scrollInterpolator ||\r\n      !!slideInterpolatedStyle ||\r\n      this._shouldUseShiftLayout() ||\r\n      this._shouldUseStackLayout() ||\r\n      this._shouldUseTinderLayout()\r\n      );\r\n  }\r\n\r\n  _shouldUseShiftLayout () {\r\n      const { inactiveSlideShift, layout } = this.props;\r\n      return layout === 'default' && inactiveSlideShift !== 0;\r\n  }\r\n\r\n  _shouldUseStackLayout () {\r\n      return this.props.layout === 'stack';\r\n  }\r\n\r\n  _shouldUseTinderLayout () {\r\n      return this.props.layout === 'tinder';\r\n  }\r\n\r\n  _shouldRepositionScroll (index: number) {\r\n      const { data, enableSnap, loopClonesPerSide } = this.props;\r\n      const dataLength = data && data.length;\r\n      if (\r\n          !enableSnap ||\r\n      !dataLength ||\r\n      !this._enableLoop() ||\r\n      (index >= loopClonesPerSide && index < dataLength + loopClonesPerSide)\r\n      ) {\r\n          return false;\r\n      }\r\n      return true;\r\n  }\r\n\r\n  _roundNumber (num: number, decimals = 1) {\r\n      // https://stackoverflow.com/a/41716722/\r\n      const rounder = Math.pow(10, decimals);\r\n      return Math.round((num + Number.EPSILON) * rounder) / rounder;\r\n  }\r\n\r\n  _isMultiple (x: number, y: number) {\r\n      // This prevents Javascript precision issues: https://stackoverflow.com/a/58440614/\r\n      // Required because Android viewport size can return pretty complicated decimals numbers\r\n      return Math.round(Math.round(x / y) / (1 / y)) === Math.round(x);\r\n  }\r\n\r\n  _getCustomData (props: CarouselProps<TData> = this.props) {\r\n      const { data, loopClonesPerSide } = props;\r\n      const dataLength = data && data.length;\r\n\r\n      if (!dataLength) {\r\n          return [];\r\n      }\r\n\r\n      if (!this._enableLoop()) {\r\n          return data;\r\n      }\r\n\r\n      let previousItems = [];\r\n      let nextItems = [];\r\n\r\n      if (loopClonesPerSide > dataLength) {\r\n          const dataMultiplier = Math.floor(loopClonesPerSide / dataLength);\r\n          const remainder = loopClonesPerSide % dataLength;\r\n\r\n          for (let i = 0; i < dataMultiplier; i++) {\r\n              previousItems.push(...data);\r\n              nextItems.push(...data);\r\n          }\r\n\r\n          previousItems.unshift(...data.slice(-remainder));\r\n          nextItems.push(...data.slice(0, remainder));\r\n      } else {\r\n          previousItems = data.slice(-loopClonesPerSide);\r\n          nextItems = data.slice(0, loopClonesPerSide);\r\n      }\r\n\r\n      return previousItems.concat(data, nextItems);\r\n  }\r\n\r\n  _getCustomDataLength (props: CarouselProps<TData> = this.props) {\r\n      const { data, loopClonesPerSide } = props;\r\n      const dataLength = data && data.length;\r\n\r\n      if (!dataLength) {\r\n          return 0;\r\n      }\r\n\r\n      return this._enableLoop() ? dataLength + 2 * loopClonesPerSide : dataLength;\r\n  }\r\n\r\n  _getCustomIndex (index: number, props: CarouselProps<TData> = this.props) {\r\n      const itemsLength = this._getCustomDataLength(props);\r\n\r\n      if (!itemsLength || typeof index === 'undefined') {\r\n          return 0;\r\n      }\r\n\r\n      return this._needsRTLAdaptations() ? itemsLength - index - 1 : index;\r\n  }\r\n\r\n  _getDataIndex (index: number) {\r\n      const { data, loopClonesPerSide } = this.props;\r\n      const dataLength = data && data.length;\r\n\r\n      if (!this._enableLoop() || !dataLength) {\r\n          return index;\r\n      }\r\n\r\n      if (index >= dataLength + loopClonesPerSide) {\r\n          return loopClonesPerSide > dataLength ?\r\n              (index - loopClonesPerSide) % dataLength :\r\n              index - dataLength - loopClonesPerSide;\r\n      } else if (index < loopClonesPerSide) {\r\n      // TODO: is there a simpler way of determining the interpolated index?\r\n          if (loopClonesPerSide > dataLength) {\r\n              const baseDataIndexes = [];\r\n              const dataIndexes = [];\r\n              const dataMultiplier = Math.floor(loopClonesPerSide / dataLength);\r\n              const remainder = loopClonesPerSide % dataLength;\r\n\r\n              for (let i = 0; i < dataLength; i++) {\r\n                  baseDataIndexes.push(i);\r\n              }\r\n\r\n              for (let j = 0; j < dataMultiplier; j++) {\r\n                  dataIndexes.push(...baseDataIndexes);\r\n              }\r\n\r\n              dataIndexes.unshift(...baseDataIndexes.slice(-remainder));\r\n              return dataIndexes[index];\r\n          } else {\r\n              return index + dataLength - loopClonesPerSide;\r\n          }\r\n      } else {\r\n          return index - loopClonesPerSide;\r\n      }\r\n  }\r\n\r\n  // Used with `snapToItem()` and 'PaginationDot'\r\n  _getPositionIndex (index: number) {\r\n      const { loop, loopClonesPerSide } = this.props;\r\n      return loop ? index + loopClonesPerSide : index;\r\n  }\r\n\r\n  _getSnapOffsets (props: CarouselProps<TData> = this.props) {\r\n      const offset = this._getItemMainDimension();\r\n      return [...Array(this._getCustomDataLength(props))].map((_, i) => {\r\n          return i * offset;\r\n      });\r\n  }\r\n\r\n  _getFirstItem (index: number, props: CarouselProps<TData> = this.props) {\r\n      const { loopClonesPerSide } = props;\r\n      const itemsLength = this._getCustomDataLength(props);\r\n\r\n      if (!itemsLength || index > itemsLength - 1 || index < 0) {\r\n          return 0;\r\n      }\r\n\r\n      return this._enableLoop() ? index + loopClonesPerSide : index;\r\n  }\r\n\r\n  _getWrappedRef () {\r\n      // Starting with RN 0.62, we should no longer call `getNode()` on the ref of an Animated component\r\n      if (\r\n          this._carouselRef &&\r\n      ((this._needsScrollView() &&\r\n        (this._carouselRef as ScrollView).scrollTo) ||\r\n        (!this._needsScrollView() &&\r\n          (this._carouselRef as FlatList).scrollToOffset))\r\n      ) {\r\n          return this._carouselRef;\r\n      }\r\n      // https://github.com/facebook/react-native/issues/10635\r\n      // https://stackoverflow.com/a/48786374/8412141\r\n      return (\r\n          this._carouselRef &&\r\n      // @ts-expect-error This is for before 0.62\r\n      this._carouselRef.getNode &&\r\n      // @ts-expect-error This is for before 0.62\r\n      this._carouselRef.getNode()\r\n      );\r\n  }\r\n\r\n  _getScrollEnabled () {\r\n      return this._scrollEnabled;\r\n  }\r\n\r\n  _setScrollEnabled (scrollEnabled = true) {\r\n      const wrappedRef = this._getWrappedRef();\r\n\r\n      if (!wrappedRef || !wrappedRef.setNativeProps) {\r\n          return;\r\n      }\r\n\r\n      // 'setNativeProps()' is used instead of 'setState()' because the latter\r\n      // really takes a toll on Android behavior when momentum is disabled\r\n      wrappedRef.setNativeProps({ scrollEnabled });\r\n      this._scrollEnabled = scrollEnabled;\r\n  }\r\n\r\n  _getItemMainDimension () {\r\n      return this.props.vertical ? this.props.itemHeight : this.props.itemWidth;\r\n  }\r\n\r\n  _getItemScrollOffset (index: number) {\r\n      return (\r\n          this._positions && this._positions[index] && this._positions[index].start\r\n      );\r\n  }\r\n\r\n  _getItemLayout (_: TData[], index: number) {\r\n      const itemMainDimension = this._getItemMainDimension();\r\n      return {\r\n          index,\r\n          length: itemMainDimension,\r\n          offset: itemMainDimension * index // + this._getContainerInnerMargin()\r\n      };\r\n  }\r\n\r\n  // This will allow us to have a proper zIndex even with a FlatList\r\n  // https://github.com/facebook/react-native/issues/18616#issuecomment-389444165\r\n  _getCellRendererComponent ({\r\n      children,\r\n      index,\r\n      style,\r\n      ...props\r\n  }: PropsWithChildren<{ index: number; style: StyleProp<ViewStyle> }>) {\r\n      const cellStyle = [\r\n          style,\r\n          !IS_ANDROID ? { zIndex: this._getCustomDataLength() - index } : {}\r\n      ];\r\n\r\n      return (\r\n          <View style={cellStyle} key={index} {...props}>\r\n              {children}\r\n          </View>\r\n      );\r\n  }\r\n\r\n  _getKeyExtractor (_: TData, index: number) {\r\n      return this._needsScrollView() ?\r\n          `scrollview-item-${index}` :\r\n          `flatlist-item-${index}`;\r\n  }\r\n\r\n  _getScrollOffset (event: NativeSyntheticEvent<NativeScrollEvent>) {\r\n      const { vertical } = this.props;\r\n      return (\r\n          (event &&\r\n        event.nativeEvent &&\r\n        event.nativeEvent.contentOffset &&\r\n        event.nativeEvent.contentOffset[vertical ? 'y' : 'x']) ||\r\n      0\r\n      );\r\n  }\r\n\r\n  _getContainerInnerMargin (opposite = false) {\r\n      const { activeSlideAlignment } = this.props;\r\n\r\n      if (\r\n          (activeSlideAlignment === 'start' && !opposite) ||\r\n      (activeSlideAlignment === 'end' && opposite)\r\n      ) {\r\n          return 0;\r\n      } else if (\r\n          (activeSlideAlignment === 'end' && !opposite) ||\r\n      (activeSlideAlignment === 'start' && opposite)\r\n      ) {\r\n          return this.props.vertical ?\r\n              this.props.sliderHeight - this.props.itemHeight :\r\n              this.props.sliderWidth - this.props.itemWidth;\r\n      } else {\r\n          return this.props.vertical ?\r\n              (this.props.sliderHeight - this.props.itemHeight) / 2 :\r\n              (this.props.sliderWidth - this.props.itemWidth) / 2;\r\n      }\r\n  }\r\n\r\n  _getActiveSlideOffset () {\r\n      const { activeSlideOffset } = this.props;\r\n      const itemMainDimension = this._getItemMainDimension();\r\n      const minOffset = 10;\r\n      // Make sure activeSlideOffset never prevents the active area from being at least 10 px wide\r\n      return itemMainDimension / 2 - activeSlideOffset >= minOffset ?\r\n          activeSlideOffset :\r\n          minOffset;\r\n  }\r\n\r\n  _getActiveItem (offset: number) {\r\n      const itemMainDimension = this._getItemMainDimension();\r\n      const center = offset + itemMainDimension / 2;\r\n      const activeSlideOffset = this._getActiveSlideOffset();\r\n      const lastIndex = this._positions.length - 1;\r\n      let itemIndex;\r\n\r\n      if (offset <= 0) {\r\n          return 0;\r\n      }\r\n\r\n      if (\r\n          this._positions[lastIndex] &&\r\n      offset >= this._positions[lastIndex].start\r\n      ) {\r\n          return lastIndex;\r\n      }\r\n\r\n      for (let i = 0; i < this._positions.length; i++) {\r\n          const { start, end } = this._positions[i];\r\n          if (\r\n              center + activeSlideOffset >= start &&\r\n        center - activeSlideOffset <= end\r\n          ) {\r\n              itemIndex = i;\r\n              break;\r\n          }\r\n      }\r\n\r\n      return itemIndex || 0;\r\n  }\r\n\r\n  _getSlideInterpolatedStyle (index: number, animatedValue: Animated.AnimatedInterpolation) {\r\n      const { layoutCardOffset, slideInterpolatedStyle } = this.props;\r\n\r\n      if (slideInterpolatedStyle) {\r\n          return slideInterpolatedStyle(index, animatedValue, this.props);\r\n      } else if (this._shouldUseTinderLayout()) {\r\n          return tinderAnimatedStyles(\r\n              index,\r\n              animatedValue,\r\n              this.props,\r\n              layoutCardOffset\r\n          );\r\n      } else if (this._shouldUseStackLayout()) {\r\n          return stackAnimatedStyles(\r\n              index,\r\n              animatedValue,\r\n              this.props,\r\n              layoutCardOffset\r\n          );\r\n      } else if (this._shouldUseShiftLayout()) {\r\n          return shiftAnimatedStyles(index, animatedValue, this.props);\r\n      } else {\r\n          return defaultAnimatedStyles(index, animatedValue, this.props);\r\n      }\r\n  }\r\n\r\n  _initPositionsAndInterpolators (props: CarouselProps<TData> = this.props) {\r\n      const { data, scrollInterpolator } = props;\r\n      const itemMainDimension = this._getItemMainDimension();\r\n\r\n      if (!data || !data.length) {\r\n          return;\r\n      }\r\n\r\n      const interpolators: Animated.AnimatedInterpolation[] = [];\r\n      this._positions = [];\r\n\r\n      this._getCustomData(props).forEach((_itemData, index) => {\r\n          const _index = this._getCustomIndex(index, props);\r\n          let animatedValue: Animated.AnimatedInterpolation;\r\n\r\n          this._positions[index] = {\r\n              start: index * itemMainDimension,\r\n              end: index * itemMainDimension + itemMainDimension\r\n          };\r\n\r\n          if (!this._shouldAnimateSlides(props) || !this._scrollPos) {\r\n              animatedValue = new Animated.Value(1);\r\n          } else {\r\n              let interpolator;\r\n\r\n              if (scrollInterpolator) {\r\n                  interpolator = scrollInterpolator(_index, props);\r\n              } else if (this._shouldUseStackLayout()) {\r\n                  interpolator = stackScrollInterpolator(_index, props);\r\n              } else if (this._shouldUseTinderLayout()) {\r\n                  interpolator = tinderScrollInterpolator(_index, props);\r\n              }\r\n\r\n              if (\r\n                  !interpolator ||\r\n          !interpolator.inputRange ||\r\n          !interpolator.outputRange\r\n              ) {\r\n                  interpolator = defaultScrollInterpolator(_index, props);\r\n              }\r\n\r\n              animatedValue = this._scrollPos.interpolate({\r\n                  ...interpolator,\r\n                  extrapolate: 'clamp'\r\n              });\r\n          }\r\n\r\n          interpolators.push(animatedValue);\r\n      });\r\n\r\n      this.setState({ interpolators });\r\n  }\r\n\r\n  _hackActiveSlideAnimation (index: number, scrollValue = 1) {\r\n      const offset = this._getItemScrollOffset(index);\r\n\r\n      if (!this._mounted || !this._carouselRef || typeof offset === 'undefined') {\r\n          return;\r\n      }\r\n\r\n      const multiplier = this._currentScrollOffset === 0 ? 1 : -1;\r\n      const scrollDelta = scrollValue * multiplier;\r\n\r\n      this._scrollTo({ offset: offset + scrollDelta, animated: false });\r\n\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearTimeout(this._hackSlideAnimationTimeout);\r\n      this._hackSlideAnimationTimeout = setTimeout(() => {\r\n          this._scrollTo({ offset, animated: false });\r\n      }, 1); // works randomly when set to '0'\r\n  }\r\n\r\n  _repositionScroll (index: number, animated = false) {\r\n      const { data, loopClonesPerSide } = this.props;\r\n      const dataLength = data && data.length;\r\n\r\n      if (typeof index === 'undefined' || !this._shouldRepositionScroll(index)) {\r\n          return;\r\n      }\r\n\r\n      let repositionTo = index;\r\n\r\n      if (index >= dataLength + loopClonesPerSide) {\r\n          repositionTo = index - dataLength;\r\n      } else if (index < loopClonesPerSide) {\r\n          repositionTo = index + dataLength;\r\n      }\r\n\r\n      this._snapToItem(repositionTo, animated, false);\r\n  }\r\n\r\n  _scrollTo ({\r\n      offset,\r\n      index,\r\n      animated = true\r\n  }: {\r\n    offset: number;\r\n    index?: number;\r\n    animated: boolean;\r\n  }) {\r\n      const { vertical } = this.props;\r\n      const wrappedRef = this._getWrappedRef();\r\n      if (\r\n          !this._mounted ||\r\n      !wrappedRef ||\r\n      (typeof offset === 'undefined' && typeof index === 'undefined')\r\n      ) {\r\n          return;\r\n      }\r\n\r\n      let scrollToOffset;\r\n      if (typeof index !== 'undefined') {\r\n          scrollToOffset = this._getItemScrollOffset(index);\r\n      } else {\r\n          scrollToOffset = offset;\r\n      }\r\n\r\n      if (typeof scrollToOffset === 'undefined') {\r\n          return;\r\n      }\r\n\r\n      const options = this._needsScrollView() ?\r\n          {\r\n              x: vertical ? 0 : offset,\r\n              y: vertical ? offset : 0,\r\n              animated\r\n          } :\r\n          {\r\n              offset,\r\n              animated\r\n          };\r\n\r\n      if (this._needsScrollView()) {\r\n          wrappedRef.scrollTo(options);\r\n      } else {\r\n          wrappedRef.scrollToOffset(options);\r\n      }\r\n  }\r\n\r\n  _onTouchStart (event: GestureResponderEvent) {\r\n      const { onTouchStart } = this.props;\r\n\r\n      // `onTouchStart` is fired even when `scrollEnabled` is set to `false`\r\n      if (this._getScrollEnabled() !== false && this._autoplaying) {\r\n          this.pauseAutoPlay();\r\n      }\r\n\r\n      onTouchStart && onTouchStart(event);\r\n  }\r\n\r\n  _onTouchEnd (event: GestureResponderEvent) {\r\n      const { onTouchEnd } = this.props;\r\n\r\n      if (\r\n          this._getScrollEnabled() !== false &&\r\n      this._autoplay &&\r\n      !this._autoplaying\r\n      ) {\r\n      // This event is buggy on Android, so a fallback is provided in _onMomentumScrollEnd()\r\n          this.startAutoplay();\r\n      }\r\n\r\n      onTouchEnd && onTouchEnd(event);\r\n  }\r\n\r\n  _onScroll (event: NativeSyntheticEvent<NativeScrollEvent>) {\r\n      const { onScroll, onScrollIndexChanged } = this.props;\r\n      const scrollOffset = event ?\r\n          this._getScrollOffset(event) :\r\n          this._currentScrollOffset;\r\n      const nextActiveItem = this._getActiveItem(scrollOffset);\r\n\r\n      this._currentScrollOffset = scrollOffset;\r\n\r\n      if (nextActiveItem !== this._onScrollActiveItem) {\r\n          this._onScrollActiveItem = nextActiveItem;\r\n          onScrollIndexChanged &&\r\n        onScrollIndexChanged(this._getDataIndex(nextActiveItem));\r\n      }\r\n\r\n      if (typeof onScroll === 'function' && event) {\r\n          onScroll(event);\r\n      }\r\n  }\r\n\r\n  _onMomentumScrollEnd (event: NativeSyntheticEvent<NativeScrollEvent>) {\r\n      const { autoplayDelay, onMomentumScrollEnd, onSnapToItem } = this.props;\r\n      const scrollOffset = event ?\r\n          this._getScrollOffset(event) :\r\n          this._currentScrollOffset;\r\n      const nextActiveItem = this._getActiveItem(scrollOffset);\r\n      const hasSnapped = this._isMultiple(\r\n          scrollOffset,\r\n          this.props.vertical ? this.props.itemHeight : this.props.itemWidth\r\n      );\r\n\r\n      // WARNING: everything in this condition will probably need to be called on _snapToItem as well because:\r\n      // 1. `onMomentumScrollEnd` won't be called if the scroll isn't animated\r\n      // 2. `onMomentumScrollEnd` won't be called at all on Android when scrolling programmatically\r\n      if (nextActiveItem !== this._activeItem) {\r\n          this._activeItem = nextActiveItem;\r\n          onSnapToItem && onSnapToItem(this._getDataIndex(nextActiveItem));\r\n\r\n          if (hasSnapped) {\r\n              this._repositionScroll(nextActiveItem);\r\n          }\r\n      }\r\n\r\n      onMomentumScrollEnd && onMomentumScrollEnd(event);\r\n\r\n      // The touchEnd event is buggy on Android, so this will serve as a fallback whenever needed\r\n      // https://github.com/facebook/react-native/issues/9439\r\n      if (IS_ANDROID && this._autoplay && !this._autoplaying) {\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n          clearTimeout(this._enableAutoplayTimeout);\r\n          this._enableAutoplayTimeout = setTimeout(() => {\r\n              this.startAutoplay();\r\n          }, autoplayDelay);\r\n      }\r\n  }\r\n\r\n  _onLayout (event: LayoutChangeEvent) {\r\n      const { onLayout } = this.props;\r\n\r\n      // Prevent unneeded actions during the first 'onLayout' (triggered on init)\r\n      if (this._onLayoutInitDone) {\r\n          this._initPositionsAndInterpolators();\r\n          this._snapToItem(this._activeItem, false, false, true);\r\n      } else {\r\n          this._onLayoutInitDone = true;\r\n      }\r\n\r\n      onLayout && onLayout(event);\r\n  }\r\n\r\n  _snapToItem (\r\n      index: number,\r\n      animated = true,\r\n      fireCallback = true,\r\n      forceScrollTo = false\r\n  ) {\r\n      const { onSnapToItem } = this.props;\r\n      const itemsLength = this._getCustomDataLength();\r\n      const wrappedRef = this._getWrappedRef();\r\n\r\n      if (!itemsLength || !wrappedRef) {\r\n          return;\r\n      }\r\n\r\n      if (!index || index < 0) {\r\n          index = 0;\r\n      } else if (itemsLength > 0 && index >= itemsLength) {\r\n          index = itemsLength - 1;\r\n      }\r\n\r\n      if (index === this._activeItem && !forceScrollTo) {\r\n          return;\r\n      }\r\n\r\n      const offset = this._getItemScrollOffset(index);\r\n\r\n      if (offset === undefined) {\r\n          return;\r\n      }\r\n\r\n      this._scrollTo({ offset, animated });\r\n\r\n      // On both platforms, `onMomentumScrollEnd` won't be triggered if the scroll isn't animated\r\n      // so we need to trigger the callback manually\r\n      // On Android `onMomentumScrollEnd` won't be triggered when scrolling programmatically\r\n      // Therefore everything critical needs to be manually called here as well, even though the timing might be off\r\n      const requiresManualTrigger = !animated || IS_ANDROID;\r\n      if (requiresManualTrigger) {\r\n          this._activeItem = index;\r\n\r\n          if (fireCallback) {\r\n              onSnapToItem && onSnapToItem(this._getDataIndex(index));\r\n          }\r\n\r\n          // Repositioning on Android\r\n          if (IS_ANDROID && this._shouldRepositionScroll(index)) {\r\n              if (animated) {\r\n                  this._androidRepositioningTimeout = setTimeout(() => {\r\n                      // Without scroll animation, the behavior is completely buggy...\r\n                      this._repositionScroll(index, true);\r\n                  }, 400); // Approximate scroll duration on Android\r\n              } else {\r\n                  this._repositionScroll(index);\r\n              }\r\n          }\r\n      }\r\n  }\r\n\r\n  startAutoplay () {\r\n      const { autoplayInterval, autoplayDelay } = this.props;\r\n      this._autoplay = true;\r\n\r\n      if (this._autoplaying) {\r\n          return;\r\n      }\r\n\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearTimeout(this._autoplayTimeout);\r\n      this._autoplayTimeout = setTimeout(() => {\r\n          this._autoplaying = true;\r\n          this._autoplayInterval = setInterval(() => {\r\n              if (this._autoplaying) {\r\n                  this.snapToNext();\r\n              }\r\n          }, autoplayInterval);\r\n      }, autoplayDelay);\r\n  }\r\n\r\n  pauseAutoPlay () {\r\n      this._autoplaying = false;\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearTimeout(this._autoplayTimeout);\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearTimeout(this._enableAutoplayTimeout);\r\n      // @ts-expect-error setTimeout / clearTiemout is buggy :/\r\n      clearInterval(this._autoplayInterval);\r\n  }\r\n\r\n  stopAutoplay () {\r\n      this._autoplay = false;\r\n      this.pauseAutoPlay();\r\n  }\r\n\r\n  snapToItem (index: number, animated = true, fireCallback = true) {\r\n      if (!index || index < 0) {\r\n          index = 0;\r\n      }\r\n\r\n      const positionIndex = this._getPositionIndex(index);\r\n\r\n      if (positionIndex === this._activeItem) {\r\n          return;\r\n      }\r\n\r\n      this._snapToItem(positionIndex, animated, fireCallback);\r\n  }\r\n\r\n  snapToNext (animated = true, fireCallback = true) {\r\n      const itemsLength = this._getCustomDataLength();\r\n\r\n      let newIndex = this._activeItem + 1;\r\n      if (newIndex > itemsLength - 1) {\r\n          newIndex = 0;\r\n      }\r\n      this._snapToItem(newIndex, animated, fireCallback);\r\n  }\r\n\r\n  snapToPrev (animated = true, fireCallback = true) {\r\n      const itemsLength = this._getCustomDataLength();\r\n\r\n      let newIndex = this._activeItem - 1;\r\n      if (newIndex < 0) {\r\n          newIndex = itemsLength - 1;\r\n      }\r\n      this._snapToItem(newIndex, animated, fireCallback);\r\n  }\r\n\r\n  // https://github.com/facebook/react-native/issues/1831#issuecomment-231069668\r\n  triggerRenderingHack (offset = 1) {\r\n      this._hackActiveSlideAnimation(this._activeItem, offset);\r\n  }\r\n\r\n  _renderItem ({ item, index }: { item: TData; index: number }) {\r\n      const { interpolators } = this.state;\r\n      const {\r\n          keyExtractor,\r\n          slideStyle\r\n      } = this.props;\r\n      const animatedValue = interpolators && interpolators[index];\r\n\r\n      if (typeof animatedValue === 'undefined') {\r\n          return null;\r\n      }\r\n\r\n      const animate = this._shouldAnimateSlides();\r\n      const Component = animate ? Animated.View : View;\r\n      const animatedStyle = animate ?\r\n          this._getSlideInterpolatedStyle(index, animatedValue) :\r\n          {};\r\n      const dataIndex = this._getDataIndex(index);\r\n\r\n      const mainDimension = this.props.vertical ?\r\n          { height: this.props.itemHeight } :\r\n          { width: this.props.itemWidth };\r\n      const specificProps = this._needsScrollView() ?\r\n          {\r\n              key: keyExtractor ?\r\n                  keyExtractor(item, index) :\r\n                  this._getKeyExtractor(item, index)\r\n          } :\r\n          {};\r\n\r\n      return (\r\n          <Component\r\n            style={[mainDimension, slideStyle, animatedStyle]}\r\n            pointerEvents='box-none'\r\n            {...specificProps}\r\n          >\r\n              {this.props.vertical ? this.props.renderItem({ item, index, dataIndex }, {\r\n                  scrollPosition: this._scrollPos,\r\n                  carouselRef: this._carouselRef,\r\n                  vertical: this.props.vertical,\r\n                  sliderHeight: this.props.sliderHeight,\r\n                  itemHeight: this.props.itemHeight\r\n              }) : this.props.renderItem({ item, index, dataIndex }, {\r\n                  scrollPosition: this._scrollPos,\r\n                  carouselRef: this._carouselRef,\r\n                  vertical: !!this.props.vertical,\r\n                  sliderWidth: this.props.sliderWidth,\r\n                  itemWidth: this.props.itemWidth\r\n              })}\r\n          </Component>\r\n      );\r\n  }\r\n\r\n  _getComponentOverridableProps () {\r\n      const { hideCarousel } = this.state;\r\n      const { loopClonesPerSide } = this.props;\r\n      const visibleItems =\r\n      Math.ceil(\r\n          this.props.vertical ?\r\n              this.props.sliderHeight / this.props.itemHeight :\r\n              this.props.sliderWidth / this.props.itemWidth\r\n      ) + 1;\r\n      const initialNumPerSide = this._enableLoop() ? loopClonesPerSide : 2;\r\n      const initialNumToRender = visibleItems + initialNumPerSide * 2;\r\n      const maxToRenderPerBatch = initialNumToRender + initialNumPerSide * 2;\r\n      const windowSize = maxToRenderPerBatch;\r\n\r\n      const specificProps = !this._needsScrollView() ?\r\n          {\r\n              initialNumToRender,\r\n              maxToRenderPerBatch,\r\n              windowSize\r\n          // updateCellsBatchingPeriod\r\n          } :\r\n          {};\r\n\r\n      return {\r\n          ...specificProps,\r\n          automaticallyAdjustContentInsets: false,\r\n          decelerationRate: 'fast' as const,\r\n          directionalLockEnabled: true,\r\n          disableScrollViewPanResponder: false, // If set to `true`, touch events will be triggered too easily\r\n          inverted: this._needsRTLAdaptations(),\r\n          overScrollMode: 'never' as const,\r\n          pinchGestureEnabled: false,\r\n          pointerEvents: hideCarousel ? 'none' as const : 'auto' as const,\r\n          // removeClippedSubviews: !this._needsScrollView(),\r\n          // renderToHardwareTextureAndroid: true,\r\n          scrollsToTop: false,\r\n          showsHorizontalScrollIndicator: false,\r\n          showsVerticalScrollIndicator: false\r\n      };\r\n  }\r\n\r\n  _getComponentStaticProps () {\r\n      const { hideCarousel } = this.state;\r\n      const {\r\n          activeSlideAlignment,\r\n          CellRendererComponent,\r\n          containerCustomStyle,\r\n          contentContainerCustomStyle,\r\n          firstItem,\r\n          getItemLayout,\r\n          keyExtractor,\r\n          style,\r\n          useExperimentalSnap\r\n      } = this.props;\r\n\r\n      const containerStyle = [\r\n      // { overflow: 'hidden' },\r\n          containerCustomStyle || style || {},\r\n          hideCarousel ? { opacity: 0 } : {},\r\n          this.props.vertical ?\r\n              { height: this.props.sliderHeight, flexDirection: 'column' as const } : // LTR hack; see https://github.com/facebook/react-native/issues/11960\r\n          // and https://github.com/facebook/react-native/issues/13100#issuecomment-328986423\r\n              {\r\n                  width: this.props.sliderWidth,\r\n                  flexDirection: this._needsRTLAdaptations() ? 'row-reverse' as const : 'row' as const\r\n              }\r\n      ];\r\n\r\n      const innerMarginStyle = this.props.vertical ?\r\n          {\r\n              paddingTop: this._getContainerInnerMargin(),\r\n              paddingBottom: this._getContainerInnerMargin(true)\r\n          } :\r\n          {\r\n              paddingLeft: this._getContainerInnerMargin(),\r\n              paddingRight: this._getContainerInnerMargin(true)\r\n          };\r\n\r\n      const contentContainerStyle = [\r\n          !useExperimentalSnap ? innerMarginStyle : {},\r\n          contentContainerCustomStyle || {}\r\n      ];\r\n\r\n      // WARNING: `snapToAlignment` won't work as intended because of the following:\r\n      // https://github.com/facebook/react-native/blob/d0871d0a9a373e1d3ac35da46c85c0d0e793116d/React/Views/ScrollView/RCTScrollView.m#L751-L755\r\n      // - Snap points will be off\r\n      // - Slide animations will be off\r\n      // - Last items won't be set as active (no `onSnapToItem` callback)\r\n      // Recommended only with large slides and `activeSlideAlignment` set to `start` for the time being\r\n      const snapProps = useExperimentalSnap ?\r\n          {\r\n          // disableIntervalMomentum: true, // Slide  one item at a time\r\n              snapToAlignment: activeSlideAlignment,\r\n              snapToInterval: this._getItemMainDimension()\r\n          } :\r\n          {\r\n              snapToOffsets: this._getSnapOffsets()\r\n          };\r\n\r\n      // Flatlist specifics\r\n      const specificProps = !this._needsScrollView() ?\r\n          {\r\n              CellRendererComponent:\r\n            CellRendererComponent || this._getCellRendererComponent,\r\n              getItemLayout: getItemLayout || this._getItemLayout,\r\n              initialScrollIndex: this._getFirstItem(firstItem),\r\n              keyExtractor: keyExtractor || this._getKeyExtractor,\r\n              numColumns: 1,\r\n              renderItem: this._renderItem\r\n          } :\r\n          {};\r\n\r\n      return {\r\n          ...specificProps,\r\n          ...snapProps,\r\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n          ref: (c: any) => {\r\n              this._carouselRef = c as FlatList<TData> | ScrollView;\r\n          },\r\n          contentContainerStyle: contentContainerStyle,\r\n          data: this._getCustomData(),\r\n          horizontal: !this.props.vertical,\r\n          scrollEventThrottle: 1,\r\n          style: containerStyle,\r\n          onLayout: this._onLayout,\r\n          onMomentumScrollEnd: this._onMomentumScrollEnd,\r\n          onScroll: this._onScrollHandler,\r\n          onTouchStart: this._onTouchStart,\r\n          onTouchEnd: this._onTouchEnd\r\n      };\r\n  }\r\n\r\n  render () {\r\n      const { data, renderItem, useScrollView } = this.props;\r\n\r\n      if (!data || !renderItem) {\r\n          return null;\r\n      }\r\n\r\n      const props = {\r\n          ...this._getComponentOverridableProps(),\r\n          ...this.props,\r\n          ...this._getComponentStaticProps()\r\n      };\r\n\r\n      const ScrollViewComponent =\r\n      typeof useScrollView === 'function' ? useScrollView : Animated.ScrollView;\r\n\r\n      return this._needsScrollView() || !Animated.FlatList ? (\r\n          <ScrollViewComponent {...props}>\r\n              {this._getCustomData().map((item, index) => {\r\n                  return this._renderItem({ item, index });\r\n              })}\r\n          </ScrollViewComponent>\r\n      ) : (\r\n          // @ts-expect-error Seems complicated to make TS 100% happy, while sharing that many things between\r\n          // flatlist && scrollview implementation. I'll prob try to rewrite parts of the logic to overcome that.\r\n          <Animated.FlatList {...props} />\r\n      );\r\n  }\r\n}\r\n\r\nexport default Carousel;\r\n"]}